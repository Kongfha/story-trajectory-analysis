Detect top 3 narrative peaks for this novel and return strict JSON only.

BOOK_ID: {{BOOK_ID}}
TITLE: {{TITLE}}

CONSTRAINTS:
- top_n = 3
- min_chunk_gap = 3

OUTPUT SCHEMA REQUIREMENTS:
- Use the exact keys and types shown in the schema below.
- peak ranks must be 1,2,3.
- chunk_index must be integer and within [0, total_chunks-1].
- position_norm = chunk_index / (total_chunks - 1), rounded to 6 decimals.
- Keep why_short <= 35 words.
- Keep evidence_quote <= 20 words.

JSON_SCHEMA:
{
  "book_id": "string",
  "title": "string",
  "total_chunks": "integer",
  "method": {
    "name": "llm_judge_peak_detection",
    "top_n": 3,
    "min_chunk_gap": 3
  },
  "peaks": [
    {
      "rank": "integer (1..3)",
      "chunk_index": "integer",
      "position_norm": "number (0..1)",
      "peak_strength": "number (0..1)",
      "confidence": "number (0..1)",
      "peak_type": "one of [revelation, reversal, climax, betrayal, loss, decision, other]",
      "why_short": "string <= 35 words",
      "evidence_quote": "string <= 20 words",
      "matched_preview": "string",
      "alt_chunk_candidates": ["integer", "integer"]
    }
  ],
  "quality_checks": {
    "exactly_three_peaks": "boolean",
    "min_gap_enforced": "boolean",
    "indices_in_range": "boolean",
    "sorted_by_rank": "boolean"
  }
}

FULL_NOVEL_TEXT:
<<<BEGIN_FULL_NOVEL_TEXT>>>
{{FULL_NOVEL_TEXT}}
<<<END_FULL_NOVEL_TEXT>>>

CHUNKS_JSONL:
<<<BEGIN_CHUNKS_JSONL>>>
{{CHUNKS_JSONL_LINES}}
<<<END_CHUNKS_JSONL>>>
